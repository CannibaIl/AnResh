<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Home</title>    
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
    <link rel="stylesheet" href="../css/index.css" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    
</head>
<body>

    <header>
    </header>

    <div id="content" class="container mt-3">
        <table id="table" class="table table-bordered">
        </table>
    </div>

    <script>

        function getDepartamentList() {
            $.get('/api/departament', function (data) {

                $('#table').append(
                    `<tbody>${data.map(d =>
                        `<tr>
                                    <td>
                                        <a href="/employees/${d.id}">${d.name}</a>
                                    </td>
                                 </tr>`).join('')}
                        </tbody>`
                );

            }).fail(function (xhr) {
                var msg = 'A server communication error occured. Server returns response code ' + xhr.status;
                displayError(msg);
            });
        }

        $(document).ready(function () {
            $("header").load('../pageComponents/header.html');
            getDepartamentList();
        });

    </script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
</body>
</html>